pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
local entities

function spawn_entity(x,y,fruit,speed)
	local entity={
		x=x,
		y=y,
		fruit=fruit, -- 2,3, or 4
		speed=speed,
		update=function(self)
			if btn(1) then
				self.x+=self.speed
			end
			if btn(0) then
				self.x-=self.speed
			end
			if btn(3) then
				self.y+=self.speed
			end
			if btn(2) then
				self.y-=self.speed
			end
		end,
		draw=function(self)
			spr(self.fruit,self.x,self.y)
		end
	}
	add(entities,entity) -- add entity to the aray
	return entity
end

function _init()
	entities={}
	local i
	for i=1,50 do
		-- happens 50 times!
		spawn_entity(127*rnd(),127*rnd(),flr(2+3*rnd()),1.5*rnd())
	end
end

function _update()
	local entity
	for entity in all(entities) do
		entity:update()
	end
end

function _draw()
	cls() -- clear the screen
	rect(0,0,127,127,1)
	local entity
	for entity in all(entities) do
		entity:draw()
	end
end

__gfx__
000000000000000004400000000b0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000004400000088bbb80000bbb300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000004a00000888b888800bbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000aaa0000888888880bbbb3330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000aaaa000888888880bbb3b300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000a4aa40888888800b33b3000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000000000000aaaaaa0888880003b333000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000aaaa00888000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001010000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000001000001010000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000010101010101010000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
0012000000300193501835000300003001635000300163500030000300003001535000300243501f3501735000300003000030000300003000030000300003000030000300003000030000300003000030000300
__music__
00 00424344

